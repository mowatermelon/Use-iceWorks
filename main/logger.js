const e=require("electron-log"),o=require("macaddress"),t=require("axios"),{isDev:n}=require("./shared");let r,l=0;function i(e,...o){n&&o.unshift(`[${e}]`),(r[e]||r.info).apply(null,o)}o.one((e,o)=>{e||(l=o)}),n?r=console:((r=e).transports.file.level="silly",r.transports.file.maxSize=31457280);const s=()=>{},a=(e,o={})=>{const n={platform:process.platform+"_"+process.arch,id:l,type:e};o.action&&(n.action=o.action,delete o.action),Object.keys(o).length>0&&(n.data=o);const r=Object.keys(n),i=r.reduce((e,o,t)=>{return`${e}${o}=${"string"==typeof n[o]?n[o]:JSON.stringify(n[o])}${r.length-1===t?"":"&"}`},"");t({method:"post",url:"http://gm.mmstat.com/iceteam.iceworks.log",data:{cache:Math.random(),gmkey:"CLK",gokey:encodeURIComponent(i),logtype:"2"}}).then(()=>{}).catch(()=>{})};module.exports={report:a,uploadLog:s,debug:i.bind(null,"debug"),error:i.bind(null,"error"),info:i.bind(null,"info"),verbose:i.bind(null,"verbose"),warn:i.bind(null,"warn")};