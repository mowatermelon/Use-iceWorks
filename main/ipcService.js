const e=require("node-ipc"),{dialog:r}=require("electron"),o=require("./helper/sendToWebContents"),s=require("./logger"),t=8e3;e.config.id="iceworks",e.config.silent=!0,e.config.networkPort=8e3,e.serveNet(function(){e.server.on("message",function({message:e,path:r},t){"sdk_status"===e.type?o(global.windows.home,"sdk-dev-status",{message:e,path:r}):"update_project"===e.action?o(global.windows.home,"update_project",{message:e,path:r}):s.warn("\u672a\u5904\u7406\u7684\u6d88\u606f\u5185\u5bb9",e)})}),e.server.on("error",function(e){s.error("iceworks ipc Got an ERROR!",e),e&&e.message&&/listen eaddrinuse/i.test(e.message)&&r.showErrorBox("\u542f\u52a8\u5f02\u5e38","Iceworks IPC \u542f\u52a8\u5931\u8d25\uff0c\u53ef\u80fd\u542f\u52a8\u4e86\u591a\u4e2a Iceworks \u8bf7\u5148\u9000\u51fa")}),module.exports={init:()=>{e.server.start(),s.info("iceworks ipc started at",8e3)}};