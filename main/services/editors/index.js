const{exec:e}=require("child_process"),{findEditorOrDefault:r}=require("./lookup"),{launchExternalEditor:t}=require("./launch"),i=require("../../exception"),c=require("../settings"),o=require("./shared"),a=require("../interaction"),{ExternalEditorError:n,CUSTOM_EDITOR:l}=o;module.exports={shared:o,open:async o=>{const u=c.get("editor")||null;if(u&&a.notify({title:"\u6b63\u5728\u542f\u52a8\u7f16\u8f91\u5668",body:u}),u===l){let r=c.get("editorShell")||"";(r=r.trim())?(r=r.replace("${cwd}",o),e(r,e=>{e&&i.catch(e)})):i.catch(new n("\u542f\u52a8\u811a\u672c\u4e3a\u7a7a"))}else try{const e=await r(u);await t(o,e)}catch(e){i.catch(e)}}};