const e=require("./generate-project"),t=require("../../logger"),r=[];class o{add({data:o,path:s,progressFunc:a},c){const l=Object.assign({},{targetPath:s,scaffold:o.scaffold,projectName:o.projectName,isCustomScaffold:o.isCustomScaffold,progressFunc:a});e(l,e=>{r.push(e)}).then(()=>{t.info("generator process complete"),c(0,{title:"\u521b\u5efa\u9879\u76ee\u5b8c\u6210",body:o.installDeps?"\u6b63\u5728\u5b89\u88c5\u4f9d\u8d56\u8bf7\u7a0d\u540e":"\u672a\u5b89\u88c5\u9879\u76ee\u4f9d\u8d56\uff0c\u8bf7\u81ea\u884c\u5b89\u88c5\u4f9d\u8d56"})}).catch(e=>{t.error("create project error",e),c(1,"abort"==e?{title:"\u9879\u76ee\u521b\u5efa\u5931\u8d25",content:"\u5df2\u4e2d\u6b62\u9879\u76ee\u521b\u5efa"}:{title:"\u9879\u76ee\u521b\u5efa\u5931\u8d25",content:"\u94fe\u63a5\u8d85\u65f6\u6216\u8bf7\u6c42\u4e2d\u65ad\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\u540e\u91cd\u8bd5\u3002",error:e})})}destroy(){let e=null;for(;e=r.pop();)e.abort()}}module.exports=new o;